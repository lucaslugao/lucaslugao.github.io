<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>üé≠</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f8fafc;
            --dark: #1e293b;
            --impostor-gradient: linear-gradient(135deg, #f43f5e 0%, #ec4899 50%, #d946ef 100%);
            --word-gradient: linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #6366f1 100%);
            --neutral-gradient: linear-gradient(135deg, #64748b 0%, #475569 100%);
            --setup-gradient: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body, html {
            height: 100%;
            overflow: hidden;
        }

        #container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            height: 100%;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            transition: background 0.5s ease;
            position: relative;
            padding: 20px;
        }

        #progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 6px;
            z-index: 1000;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            transition: width 0.1s linear;
        }

        #message {
            user-select: none;
            text-align: center;
            padding: 40px;
            font-size: clamp(1.5rem, 8vw, 4rem);
            font-weight: 700;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.5s ease;
        }

        #message .subtitle {
            font-size: clamp(0.9rem, 3vw, 1.5rem);
            font-weight: 400;
            opacity: 0.9;
            margin-top: 15px;
        }

        #message .emoji {
            font-size: clamp(3rem, 15vw, 8rem);
            display: block;
            margin-bottom: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #inputContainer {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 400px;
            animation: fadeIn 0.3s ease;
        }

        #inputValue {
            width: 100%;
            padding: 20px;
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-weight: 600;
            text-align: center;
            border: none;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            outline: none;
            transition: all 0.3s ease;
        }

        #inputValue:focus {
            transform: scale(1.02);
            box-shadow: 0 15px 50px rgba(99, 102, 241, 0.4);
        }

        #inputConfirm {
            width: 100%;
            padding: 18px 40px;
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            font-weight: 600;
            color: white;
            background: var(--success-gradient);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        #inputConfirm:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.5);
        }

        #inputConfirm:active {
            transform: translateY(0);
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 50px 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
        }

        .impostor-reveal {
            background: var(--impostor-gradient);
        }

        .word-reveal {
            background: var(--word-gradient);
        }

        .waiting {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }

        .setup {
            background: var(--setup-gradient);
        }

        .ready {
            background: var(--success-gradient);
        }

        .tap-hint {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .players-info {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .players-info .stat {
            text-align: center;
        }

        .players-info .stat-value {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 700;
        }

        .players-info .stat-label {
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="progress"></div>
        <div id="message"></div>
        <div id="inputContainer">
            <input autofocus type="number" id="inputValue" value="1" min="1">
            <button id="inputConfirm">Confirmar</button>
        </div>
    </div>

    <script>
        const palavras = [
            "p√°", "aro", "ba√∫", "dvd", "fax", "fio", "giz", "√≠m√£", "pia", "v√©u",
            "arco", "base", "bata", "beca", "bid√™", "b√≥ia", "bola", "bon√©", "bota", "cabo",
            "cama", "cano", "capa", "cera", "chip", "clip", "cola", "cone", "cruz", "cuia",
            "dado", "div√£", "elmo", "faca", "fita", "gibi", "grua", "iate", "ioi√¥", "la√ßo",
            "lata", "leme", "lira", "lona", "luva", "maca", "mai√¥", "mala", "meia", "mesa",
            "mola", "obo√©", "odre", "pino", "pipa", "pneu", "pote", "puff", "rack", "ralo",
            "rede", "remo", "roda", "rodo", "saia", "sino", "sof√°", "ta√ßa", "taco", "tear",
            "tela", "toga", "tuba", "urna", "vaso", "vela", "xale", "√°baco", "adaga", "agog√¥",
            "√°lbum", "anzol", "apito", "arp√£o", "baixo", "bal√£o", "balsa", "banco", "banjo", "batom",
            "ber√ßo", "blusa", "blush", "boina", "bolsa", "bomba", "bong√¥", "bot√£o", "broca", "bucha",
            "buqu√™", "burca", "caixa", "cal√ßa", "canga", "canoa", "carta", "cesta", "cetro", "chave",
            "clava", "cocar", "cofre", "coifa", "conga", "corda", "cu√≠ca", "dardo", "dedal", "disco",
            "draga", "fac√£o", "farda", "fog√£o", "foice", "forma", "forno", "funil", "fuzil", "gaita",
            "ganz√°", "garfo", "gesso", "gloss", "gorro", "harpa", "jarra", "jeans", "kunai", "lacre",
            "lan√ßa", "l√°pis", "laqu√™", "len√ßo", "lente", "leque", "livro", "lousa", "manta", "modem",
            "moeda", "motor", "mouse", "mural", "ofur√¥", "√≥rg√£o", "papel", "parca", "pasta", "pedal",
            "pente", "piano", "pil√£o", "pin√ßa", "pires", "placa", "pluma", "p√≥dio", "porta", "prato",
            "quepe", "radar", "r√°dio", "r√©dea", "r√©gua", "rifle", "r√≠mel", "rolha", "sab√£o", "sabre",
            "serra", "short", "spray", "sunga", "suti√£", "t√°bua", "talco", "tampa", "tanga", "telha",
            "t√™nis", "terno", "tiara", "toldo", "touca", "trave", "trono", "tumba", "varal", "vidro",
            "viola", "z√≠per", "abajur", "agenda", "agulha", "alarme", "ala√∫de", "aljava", "√¢ncora", "anilha",
            "antena", "balaio", "barril", "bast√£o", "batina", "batuta", "bazuca", "b√≠blia", "bicama", "biombo",
            "biruta", "bolero", "boneca", "bornal", "botina", "brinco", "broche", "buzina", "cabide", "caix√£o",
            "cajado", "c√°lice", "calota", "camisa", "caneca", "caneta", "cantil", "canudo", "capelo", "cart√£o",
            "casaco", "caxixi", "chap√©u", "cinzel", "coador", "colcha", "coldre", "colete", "colher", "c√¥moda",
            "concha", "crach√°", "cutelo", "di√°rio", "domin√≥", "enxada", "escova", "escudo", "espada", "espeto",
            "estaca", "estojo", "fagote", "fivela", "flauta", "flecha", "form√£o", "frasco", "fronha", "gaiola",
            "gancho", "gaveta", "grelha", "h√©lice", "jaleco", "janela", "lajota", "l√¢mina", "len√ßol", "luneta",
            "lustre", "marac√°", "mastro", "m√≠ssil", "√≥culos", "pacote", "palet√≥", "panela", "papete", "p√©rola",
            "peruca", "peteca", "pijama", "pincel", "pipeta", "planta", "pomada", "poster", "punhal", "quadro",
            "rabeca", "rodap√©", "sapato", "sirene", "sombra", "su√©ter", "talher", "tambor", "tanque", "tapete",
            "tatame", "tecido", "tigela", "tijolo", "toalha", "tobog√£", "trof√©u", "trompa", "t√∫nica", "viol√£o",
            "webcam", "x√≠cara", "acetona", "aldrava", "algod√£o", "alicate", "amuleto", "andador", "andaime", "antolho",
            "aqu√°rio", "arm√°rio", "azulejo", "balan√ßa", "baleiro", "bambol√™", "bandana", "baqueta", "barraca", "batente",
            "bateria", "beliche", "bengala", "bigorna", "bilhete", "biqu√≠ni", "bisturi", "cadar√ßo", "cadeado", "cadeira",
            "caderno", "caixote", "camafeu", "capacho", "c√°psula", "carimbo", "carpeta", "cartola", "catraca", "celular",
            "ceroula", "charuto", "chicote", "chimbal", "chinelo", "chupeta", "colch√£o", "coleira", "col√≠rio", "collant",
            "confete", "convite", "corneta", "cornija", "corpete", "cortina", "coturno", "cristal", "echarpe", "edredom",
            "enxoval", "esmalte", "espelho", "espiral", "esponja", "est√°tua", "estribo", "fl√¢mula", "foguete", "fosgate",
            "freezer", "fus√≠vel", "galocha", "garrafa", "granada", "gravata", "haltere", "incenso", "jangada", "jaqueta",
            "l√£ de a√ßo", "l√¢mpada", "lampi√£o", "lixeira", "machado", "malhete", "maquete", "marreta", "martelo", "medalha",
            "mi√ßanga", "mochila", "monitor", "morda√ßa", "navalha", "orelh√£o", "origami", "palheta", "pantufa", "p√™ndulo",
            "peneira", "penhoar", "perfume", "pistola", "pochete", "polaina", "porta cd", "prancha", "puxador", "quimono",
            "ralador", "raquete", "rastelo", "rel√≥gio", "retrato", "revista", "ros√°rio", "saleiro", "sanfona", "scanner",
            "seringa", "serrote", "smoking", "talisca", "tamanco", "teclado", "tesoura", "torpedo", "turbina", "vasilha",
            "violino", "viseira", "vitrola", "volante", "zabumba", "abafador", "alfinete", "almofada", "apagador", "aparador",
            "armadura", "asa delta", "autorama", "baioneta", "bandeira", "bandolim", "banqueta", "barbante", "berimbau", "bilboqu√™",
            "bin√≥culo", "boleador", "bombacha", "borracha", "cabresto", "ca√ßarola", "cachecol", "cachimbo", "calcinha", "cambur√£o",
            "caminh√£o", "camiseta", "camisola", "canivete", "capacete", "captador", "carretel", "carrinho", "carteira", "casti√ßal",
            "cavalete", "chaleira", "charango", "chaveiro", "chocalho", "chuteira", "chuveiro", "cisterna", "claquete", "cobertor",
            "compasso", "condu√≠te", "cors√°rio", "cotonete", "diamante", "disquete", "el√°stico", "envelope", "escopeta", "esfreg√£o",
            "esp√°tula", "esquadro", "estilete", "etiqueta", "exaustor", "fantasia", "fantoche", "faqueiro", "farolete", "ferrolho",
            "fich√°rio", "frigobar", "fruteira", "gabinete", "gangorra", "grinalda", "guitarra", "hidrante", "holofote", "ingresso",
            "isqueiro", "leiteira", "lembrete", "ma√ßaneta", "ma√ßarico", "manequim", "manivela", "megafone", "molheira", "molinete",
            "mon√≥culo", "mouse pad", "narguil√©", "notebook", "ombreira", "palmilha", "pandeiro", "parafina", "parafuso", "patinete",
            "p√© de pato", "pen drive", "persiana", "picareta", "piercing", "pingente", "poltrona", "ponteiro", "pregador", "presilha",
            "proj√©til", "pulseira", "ratoeira", "rev√≥lver", "roteador", "sabonete", "sand√°lia", "saxofone", "secadora", "sem√°foro",
            "sombrero", "tamborim", "tarracha", "telefone", "torneira", "tridente", "trombone", "trompete", "turbante", "uniforme",
            "vassoura", "xilofone", "adaptador", "aerof√≥lio", "agulheiro", "amaciante", "ampulheta", "aquecedor", "armadilha", "assadeira",
            "baf√¥metro", "bagageiro", "balaclava", "bala√∫stre", "batedeira", "betoneira", "bomba de ar", "bracelete", "brinquedo", "cabideiro",
            "caderneta", "cafeteira", "caldeir√£o", "candeeiro", "caneleira", "carrilh√£o", "cassetete", "catapulta", "catavento", "clarinete",
            "comedouro", "corretivo", "crucifixo", "espanador", "ferradura", "ferrorama", "figurinha", "filmadora", "fio dental", "furadeira",
            "geladeira", "giz de cera", "gramofone", "guirlanda", "interfone", "joelheira", "lamparina", "lancheira", "lapiseira", "lumin√°ria",
            "mamadeira", "mangueira", "marionete", "meia cal√ßa", "microfone", "minissaia", "paliteiro", "parabrisa", "p√© de cabra", "podadeira",
            "poncheira", "queijeira", "ralo de pia", "reco-reco", "relic√°rio", "repelente", "sab√£o em p√≥", "saladeira", "salto alto", "sapateira",
            "sapatilha", "sombrinha", "tabuleiro", "televis√£o", "trampolim", "tri√¢ngulo", "v√≠deo game", "abotoadura", "a√ßucareiro", "basculante",
            "bola de gude", "borrifador", "bronzeador", "bumerangue", "caixa de som", "cal√ßadeira", "calibrador", "candelabro", "cantoneira", "carretilha",
            "cavaquinho", "cinta-liga", "colchonete", "computador", "cubo m√°gico", "delineador", "detergente", "espadrilha", "espartilho", "espingarda",
            "estandarte", "estilingue", "farinheiro", "ferramenta", "focinheira", "frasqueira", "frigideira", "galheteiro", "gel fixador", "grampeador",
            "guarda-sol", "guardanapo", "guilhotina", "hidratante", "impressora", "jardineira", "lantejoula", "l√°pis de cor", "lixa de unha", "luva de boxe",
            "mata-mosca", "mime√≥grafo", "novelo de l√£", "olho m√°gico", "pano de ch√£o", "para-raios", "paraquedas", "pergaminho", "perisc√≥pio", "perna de pau",
            "pipoqueira", "p√≥ compacto", "prateleira", "refrat√°rio", "retrovisor", "revisteiro", "serpentina", "soco ingl√™s", "sorveteira", "telesc√≥pio",
            "term√¥metro", "torradeira", "triturador", "ventilador", "violoncelo", "zarabatana", "alto falante", "amortecedor", "arco e flecha", "castanholas",
            "cavalo de pau", "chave de boca", "chave de roda", "colher de pau", "contrabaixo", "cotoveleira", "desodorante", "despertador", "escapamento", "escavadeira",
            "escumadeira", "esparadrapo", "fita adesiva", "fita cassete", "fog√£o a lenha", "forma de gelo", "gargantilha", "l√°pis de olho", "l√°pis labial", "micro-ondas",
            "microsc√≥pio", "mosquiteiro", "munhequeira", "nebulizador", "√≥culos de sol", "pano de prato", "penteadeira", "pisca-pisca", "r√°dio amador", "rasteirinha",
            "rede de pesca", "rolo de massa", "saboneteira", "saca-rolhas", "samba can√ß√£o", "suspens√≥rio", "travesseiro", "unha posti√ßa", "bolsa de palha", "bolsa t√©rmica",
            "botij√£o de g√°s", "brilho labial", "cama el√°stica", "camisa regata", "chave de fenda", "chave inglesa", "coqueteleira", "criado-mudo", "desentupidor", "desinfetante",
            "escorregador", "estetosc√≥pio", "farol de milha", "filtro de √°gua", "fita isolante", "guarda-chuva", "guarda-roupa", "meia arrast√£o", "mesa de sinuca", "metralhadora",
            "papel carbono", "pulverizador", "quebra-nozes", "rel√≥gio de sol", "sanduicheira", "toalha de mesa", "tornozeleira", "transferidor", "tubo de ensaio", "v√≠deo cassete",
            "√°gua sanit√°ria", "alicate de unha", "√°rvore de natal", "aspirador de p√≥", "bola de boliche", "camisa de for√ßa", "carrinho de m√£o", "cerca el√©trica", "churrasqueira", "condicionador",
            "desfibrilador", "estabilizador", "l√≠ngua de sogra", "palito de dente", "panela de barro", "papel laminado", "quebra-cabe√ßa", "r√°dio gravador", "retroprojetor", "tinta de cabelo",
            "vaso sanit√°rio", "abridor de latas", "afiador de facas", "bicho de pel√∫cia", "cadeira de praia", "cadeira de rodas", "caixa de correio", "caixa de f√≥sforo", "caneta hidrocor", "carrinho de beb√™",
            "colete cervical", "controle remoto", "cortador de unha", "garrafa t√©rmica", "grampo de cabelo", "lente de contato", "liquidificador", "papel higi√™nico", "porta-retrato", "rede de descanso",
            "rel√≥gio de pulso", "saco de pl√°stico", "serra el√©trica", "cadeira el√©trica", "carrinho de feira", "cart√£o de cr√©dito", "cart√£o de mem√≥ria", "cartucho de tinta", "cortador de grama", "marcador de texto",
            "mesa de ping-pong", "palito de f√≥sforo", "panela de press√£o", "secador de cabelo", "abridor de garrafa", "antena parab√≥lica", "apontador de l√°pis", "cadeira de balan√ßo", "carrinho de rolim√£", "chapinha de cabelo",
            "cinto de seguran√ßa", "curvador de c√≠lios", "detector de metais", "esfigmoman√¥metro", "espremedor de alho", "m√°quina de costura", "marcador de p√°gina", "multiprocessador", "ventilador de teto", "caixa registradora",
            "depilador el√©trico", "m√°scara de mergulho", "m√°scara de oxig√™nio", "perfurador de papel", "prendedor de cabelo", "protetor auricular", "escorredor de pratos", "espremedor de frutas", "esteira ergom√©trica", "extintor de inc√™ndio",
            "ferro de passar roupa", "m√°quina fotogr√°fica", "aparelho ortod√¥ntico", "carregador de celular", "chap√©u de anivers√°rio", "m√°quina de lavar lou√ßa", "m√°quina de lavar roupa", "escorredor de macarr√£o", "carteira de habilita√ß√£o", "m√°quina de datilografar"
        ];

        const progress = document.getElementById("progress");
        const container = document.getElementById("container");
        const message = document.getElementById("message");
        const inputContainer = document.getElementById("inputContainer");
        const inputValue = document.getElementById("inputValue");
        const inputConfirm = document.getElementById("inputConfirm");

        let tapHint = null;

        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        function getNewRandomWord() {
            return palavras.splice(getRandomInt(palavras.length), 1)[0];
        }

        function generateImpostors(numPlayers, numImpostors) {
            const roles = new Array(numPlayers).fill(false);
            for (let i = 0; i < numImpostors; i++) {
                roles[i] = true;
            }
            for (let i = numPlayers - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [roles[i], roles[j]] = [roles[j], roles[i]];
            }
            return roles;
        }

        function waitForTimeout(milliseconds) {
            return new Promise((resolve) => {
                let c = 0;
                const steps = 100;
                progress.style.width = "0%";
                const p = setInterval(() => {
                    c += 1;
                    progress.style.width = `${Math.ceil(c * 100 / steps)}%`;
                }, milliseconds / steps);
                setTimeout(() => {
                    progress.style.width = "0%";
                    clearInterval(p);
                    resolve('Timeout reached');
                }, milliseconds);
            });
        }

        function showTapHint(text = "Clique para continuar") {
            if (!tapHint) {
                tapHint = document.createElement('div');
                tapHint.className = 'tap-hint';
                container.appendChild(tapHint);
            }
            tapHint.textContent = text;
            tapHint.style.display = 'flex';
        }

        function hideTapHint() {
            if (tapHint) {
                tapHint.style.display = 'none';
            }
        }

        function waitForUserInteraction() {
            return new Promise((resolve) => {
                showTapHint();

                const resolvePromise = () => {
                    hideTapHint();
                    document.removeEventListener('keydown', onKeydown);
                    document.removeEventListener('click', onClick);
                    document.removeEventListener('touchend', onTouch);
                    resolve('User interacted');
                };

                const onKeydown = (event) => {
                    if (event.code === 'Space') {
                        resolvePromise();
                    }
                };

                const onClick = (e) => {
                    if (e.target === inputValue || e.target === inputConfirm) return;
                    resolvePromise();
                };

                const onTouch = (e) => {
                    if (e.target === inputValue || e.target === inputConfirm) return;
                    resolvePromise();
                };

                document.addEventListener('keydown', onKeydown);
                document.addEventListener('click', onClick);
                document.addEventListener('touchend', onTouch);
            });
        }

        function waitForConfirm() {
            return new Promise((resolve) => {
                const resolvePromise = () => {
                    resolve('User interacted');
                    inputConfirm.removeEventListener('click', onClick);
                    inputValue.removeEventListener('keydown', onKeydown);
                };

                const onClick = () => {
                    resolvePromise();
                };

                const onKeydown = (e) => {
                    if (e.key === 'Enter') {
                        resolvePromise();
                    }
                };

                inputConfirm.addEventListener('click', onClick);
                inputValue.addEventListener('keydown', onKeydown);
            });
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function setTheme(theme) {
            container.className = theme;
        }

        function showText(theme, html) {
            setTheme(theme);
            message.innerHTML = html;
        }

        async function visualNumericPrompt(theme, promptText, min, max, suggestion) {
            showText(theme, promptText);
            inputValue.setAttribute("min", min);
            inputValue.setAttribute("max", max);
            inputValue.value = suggestion || min;
            inputContainer.style.display = "flex";
            inputValue.focus();
            await waitForConfirm();
            inputContainer.style.display = "none";
            return inputValue.value;
        }

        async function setup() {
            const p = await visualNumericPrompt("setup", "<span class='emoji'>üë•</span>Quantos jogadores?", 2, 20, 6);
            const players = parseInt(p);
            if (isNaN(players)) return [`N√∫mero inv√°lido: "${p}"`, null, null];
            if (players < 2) return ["M√≠nimo de 2 jogadores!", null, null];

            const i = await visualNumericPrompt("impostor-reveal", "<span class='emoji'>üé≠</span>Quantos impostores?", 1, players - 1, 1);
            const impostors = parseInt(i);
            if (isNaN(impostors)) return [`N√∫mero inv√°lido: "${i}"`, null, null];
            if (impostors < 1) return ["M√≠nimo de 1 impostor!", null, null];
            if (impostors > players - 1) return [`M√°ximo de ${players - 1} impostores!`, null, null];

            container.focus();
            showText("ready", `
                <span class='emoji'>‚úÖ</span>
                <div class="players-info">
                    <div class="stat">
                        <div class="stat-value">${players}</div>
                        <div class="stat-label">Jogadores</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${impostors}</div>
                        <div class="stat-label">Impostores</div>
                    </div>
                </div>
            `);
            await waitForTimeout(2000);
            return [null, players, impostors];
        }

        async function jogo(n, m) {
            showText("waiting", "<span class='emoji'>üëÜ</span>Clique para iniciar");
            await waitForUserInteraction();

            showText("waiting", "<span class='emoji'>‚è≥</span>");
            await waitForTimeout(1500);

            const palavra = getNewRandomWord();
            const impostores = generateImpostors(n, m);

            for (let idx = 0; idx < n; idx++) {
                showText("waiting", `<span class='emoji'>üîí</span>Jogador ${idx + 1}<div class='subtitle'>Clique para revelar</div>`);
                await waitForUserInteraction();

                if (impostores[idx]) {
                    showText("impostor-reveal", "<span class='emoji'>üé≠</span>Impostor");
                    await waitForTimeout(3000);
                } else {
                    showText("word-reveal", `<span class='emoji'>üìù</span>${capitalizeFirstLetter(palavra)}`);
                    await waitForTimeout(3000 + 1500 * palavra.length / 10);
                }

                if (idx !== n - 1) {
                    showText("waiting", "<span class='emoji'>üëâ</span>Pr√≥ximo jogador");
                    await waitForTimeout(2000);
                }
            }

            showText("ready", "<span class='emoji'>üéÆ</span>Bom jogo!");
            await waitForTimeout(2500);
        }

        (async () => {
            while (true) {
                showText("waiting", "<span class='emoji'>üé≠</span>Impostor<div class='subtitle'>Clique para configurar</div>");
                await waitForUserInteraction();

                const [error, players, impostors] = await setup();
                if (error) {
                    showText("impostor-reveal", `<span class='emoji'>‚ö†Ô∏è</span>${error}`);
                    await waitForTimeout(2500);
                    continue;
                }

                try {
                    await container.requestFullscreen();
                } catch (e) {
                    // Fullscreen not supported or denied
                }

                while (true) {
                    await jogo(players, impostors);
                }
            }
        })();
    </script>
</body>

</html>
